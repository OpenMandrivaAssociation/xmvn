From 84ee943dbe1c474aa7559242080d9f66b315b77d Mon Sep 17 00:00:00 2001
From: Mikolaj Izdebski <mizdebsk@redhat.com>
Date: Mon, 4 Jul 2016 11:57:34 +0200
Subject: [PATCH 3/3] Don't install POM files for Tycho projects

---
 .../java/org/fedoraproject/xmvn/mojo/InstallMojo.java | 19 +++++++++++--------
 1 file changed, 11 insertions(+), 8 deletions(-)

diff --git a/xmvn-mojo/src/main/java/org/fedoraproject/xmvn/mojo/InstallMojo.java b/xmvn-mojo/src/main/java/org/fedoraproject/xmvn/mojo/InstallMojo.java
index fd76421..d6c95c8 100644
--- a/xmvn-mojo/src/main/java/org/fedoraproject/xmvn/mojo/InstallMojo.java
+++ b/xmvn-mojo/src/main/java/org/fedoraproject/xmvn/mojo/InstallMojo.java
@@ -218,14 +218,17 @@ public class InstallMojo
             if ( mainArtifactPath != null )
                 deployArtifact( mainArtifact, type, project.getModel() );
 
-            Artifact rawPomArtifact =
-                new DefaultArtifact( mainArtifact.getGroupId(), mainArtifact.getArtifactId(), "pom",
-                                     mainArtifact.getClassifier(), mainArtifact.getVersion() );
-            File rawPomFile = project.getFile();
-            Path rawPomPath = rawPomFile != null ? rawPomFile.toPath() : null;
-            logger.debug( "Raw POM path: {}", rawPomPath );
-            rawPomArtifact = rawPomArtifact.setPath( rawPomPath );
-            deployArtifact( rawPomArtifact, type, project.getModel() );
+            if ( !isTychoProject( project ) )
+            {
+                Artifact rawPomArtifact =
+                    new DefaultArtifact( mainArtifact.getGroupId(), mainArtifact.getArtifactId(), "pom",
+                                         mainArtifact.getClassifier(), mainArtifact.getVersion() );
+                File rawPomFile = project.getFile();
+                Path rawPomPath = rawPomFile != null ? rawPomFile.toPath() : null;
+                logger.debug( "Raw POM path: {}", rawPomPath );
+                rawPomArtifact = rawPomArtifact.setPath( rawPomPath );
+                deployArtifact( rawPomArtifact, type, project.getModel() );
+            }
 
             Set<Artifact> attachedArtifacts = new LinkedHashSet<>();
             for ( org.apache.maven.artifact.Artifact mavenArtifact : project.getAttachedArtifacts() )
-- 
2.7.4

